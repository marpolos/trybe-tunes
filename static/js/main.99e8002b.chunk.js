(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{20:function(t,e,n){},39:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),c=n(22),s=n.n(c),i=(n(20),n(14)),o=n(3),u=n(4),l=n(6),d=n(5),j=n(13),b=n(7),h=n(2),f=n.n(h),p=n(9),O="user",v=function(t){return localStorage.setItem(O,JSON.stringify(t))},m=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},x=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(O));null===e&&(e={}),m(e)(t)}))},g=function(t){return new Promise((function(e){v(Object(i.a)(Object(i.a)({},{name:"",email:"",image:"",description:""}),t)),m("OK")(e)}))},k=n(0),y=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(k.jsx)("h2",{children:"Carregando..."})}}]),n}(a.Component),w=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={redirect:!1,loading:!1},t.handleButton=Object(p.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.nameUser,t.setState({loading:!0}),e.next=4,g({name:n});case 4:"OK"===e.sent&&t.setState({loading:!1,redirect:!0});case 6:case"end":return e.stop()}}),e)}))),t}return Object(u.a)(n,[{key:"componentWillUnmount",value:function(){this.setState({redirect:!1})}},{key:"render",value:function(){var t=this.props,e=t.nameUser,n=t.buttonFree,a=t.handleNameUser,r=this.state,c=r.loading,s=r.redirect;return c?Object(k.jsx)(y,{}):s?Object(k.jsx)(b.a,{to:"/trybe-tunes/search"}):Object(k.jsxs)("div",{className:"login","data-testid":"page-login",children:[Object(k.jsx)("h2",{children:"Login"}),"User:",Object(k.jsx)("input",{"data-testid":"login-name-input",type:"text",value:e,onChange:a}),Object(k.jsx)("button",{"data-testid":"login-submit-button",type:"button",disabled:n,onClick:this.handleButton,children:"Entrar"})]})}}]),n}(a.Component),S=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={user:"",loading:!1},t.getUserLogOn=Object(p.a)(f.a.mark((function e(){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),e.next=3,x();case 3:n=e.sent,a=n.name,t.setState({loading:!1,user:a});case 6:case"end":return e.stop()}}),e)}))),t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getUserLogOn()}},{key:"render",value:function(){var t=this.state,e=t.user;return t.loading?Object(k.jsx)(y,{}):Object(k.jsxs)("header",{className:"header","data-testid":"header-component",children:[Object(k.jsx)(j.b,{className:"link",to:"/search","data-testid":"link-to-search",children:"Search"}),Object(k.jsx)(j.b,{className:"link",to:"/favorites","data-testid":"link-to-favorites",children:"Favoritos"}),Object(k.jsx)(j.b,{className:"link",to:"/profile","data-testid":"link-to-profile",children:"Perfil"}),Object(k.jsx)("p",{"data-testid":"header-user-name",children:"Usu\xe1rio: ".concat(e)})]})}}]),n}(a.Component),N=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{"data-testid":"page-profile",children:[Object(k.jsx)(S,{}),Object(k.jsx)("h2",{children:"Profile"})]})}}]),n}(a.Component),C=function(){var t=Object(p.a)(f.a.mark((function t(e){var n,a,r,c,s,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI(e).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),t.next=4,fetch(a);case 4:return r=t.sent,t.next=7,r.json();case 7:return c=t.sent,s=c.results,i=s.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",i);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=C,U=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props,e=t.artistName,n=t.collectionId,a=t.collectionName,r=t.artworkUrl100;return Object(k.jsxs)("div",{classNam:"album-unitario",children:[Object(k.jsx)("h3",{children:e}),Object(k.jsx)("img",{src:r,alt:a}),Object(k.jsx)(j.b,{to:"/album/".concat(n),"data-testid":"link-to-album-".concat(n),children:a})]},n)}}]),n}(r.a.Component),F=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={artist:"",artistSearch:"",isButtonOff:!0,loading:!1,albuns:[]},t.handleSearch=function(e){var n=e.target.value;t.setState((function(){return{artist:n,artistSearch:n}}),(function(){t.setState({isButtonOff:n.length<2})}))},t.handleCatch=function(){var e=Object(p.a)(f.a.mark((function e(n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t.setState({loading:!0}),a=t.state.artist,e.next=5,I(a);case 5:r=e.sent,t.setState((function(){return{artist:"",albuns:r,loading:!1}}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.artist,n=t.isButtonOff,a=t.loading,r=t.albuns,c=t.artistSearch;return a?Object(k.jsx)(y,{}):Object(k.jsxs)("div",{"data-testid":"page-search",children:[Object(k.jsx)(S,{}),Object(k.jsxs)("form",{htmlFor:"pesquisa",children:["Nome da banda ou artista",Object(k.jsx)("br",{}),Object(k.jsx)("input",{type:"text",value:e,onChange:this.handleSearch,"data-testid":"search-artist-input"}),Object(k.jsx)("button",{type:"button",disabled:n,"data-testid":"search-artist-button",onClick:this.handleCatch,children:"Pesquisar"}),r.length?Object(k.jsxs)("section",{className:"albuns-search",children:[Object(k.jsx)("p",{className:"texto-busca",children:"Resultado de \xe1lbuns de: ".concat(c)}),r.map((function(t){return Object(k.jsx)(U,Object(i.a)({},t),t.collectionId)}))]}):Object(k.jsx)("h3",{children:"Nenhum \xe1lbum foi encontrado"})]})]})}}]),n}(a.Component),P=n(17),A=function(){var t=Object(p.a)(f.a.mark((function t(e){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=A,J=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props,e=t.trackName,n=t.previewUrl,a=t.trackId,r=t.handleChecked,c=t.handleFavorite;return Object(k.jsx)("ol",{children:Object(k.jsxs)("li",{children:[Object(k.jsx)("p",{children:e}),Object(k.jsxs)("audio",{"data-testid":"audio-component",src:n,controls:!0,children:[Object(k.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(k.jsx)("code",{children:"audio"}),"."]}),Object(k.jsxs)("label",{htmlFor:a,children:["Favorita",Object(k.jsx)("input",{type:"checkbox",name:"favorite",id:a,"data-testid":"checkbox-music-".concat(a),onChange:c,checked:r})]})]})})}}]),n}(r.a.Component),M="favorite_songs";JSON.parse(localStorage.getItem(M))||localStorage.setItem(M,JSON.stringify([]));var D=function(){return JSON.parse(localStorage.getItem(M))},T=function(t){return localStorage.setItem(M,JSON.stringify(t))},K=function(t){return function(e){setTimeout((function(){e(t)}),500)}},R=function(){return new Promise((function(t){var e=D();K(e)(t)}))},q=function(t){return new Promise((function(e){if(t){var n=D();T([].concat(Object(P.a)(n),[t]))}K("OK")(e)}))},E=function(t){return new Promise((function(e){var n=D();T(n.filter((function(e){return e.trackId!==t.trackId}))),K("OK")(e)}))},L=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={musics:[],loading:!0,favorites:[],artista:"",album:""},t.handleAlbum=function(){var e=Object(p.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(n);case 2:a=e.sent,t.setState({musics:a,loading:!1,artista:a[0].artistName,album:a[0].collectionName});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.handleFavorite=function(e){var n=e.target,a=t.state.musics,r=n.checked,c=n.id,s=a.find((function(t){return t.trackId===parseInt(c,10)}));t.setState((function(t){return{loading:!0,favorites:r?[].concat(Object(P.a)(t.favorites),[s]):t.favorites.filter((function(t){return t.trackId!==parseInt(c,10)}))}}),Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return e.next=3,q(s);case 3:e.next=7;break;case 5:return e.next=7,E(s);case 7:t.setState((function(){return{loading:!1}}));case 8:case"end":return e.stop()}}),e)}))))},t.handleCallBackFavorites=Object(p.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),e.next=3,R();case 3:(n=e.sent)&&t.setState({favorites:Object(P.a)(n),loading:!1});case 5:case"end":return e.stop()}}),e)}))),t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.match.params.id;t&&(this.handleAlbum(t),this.handleCallBackFavorites())}},{key:"render",value:function(){var t=this,e=this.state,n=e.musics,a=e.loading,r=e.favorites,c=e.artista,s=e.album;return Object(k.jsxs)("div",{"data-testid":"page-album",children:[Object(k.jsx)(S,{}),a?Object(k.jsx)(y,{}):Object(k.jsxs)("main",{children:[Object(k.jsx)("h2",{"data-testid":"artist-name",children:c}),Object(k.jsx)("h3",{"data-testid":"album-name",children:s}),n.slice(1).map((function(e){return Object(k.jsx)(J,{trackName:e.trackName,previewUrl:e.previewUrl,trackId:e.trackId,handleFavorite:t.handleFavorite,handleChecked:r.some((function(t){return t.trackId===e.trackId}))},e.trackName)}))]})]})}}]),n}(a.Component),W=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={loading:!1,favorites:[]},t.handleFavoritesMusics=Object(p.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),e.next=3,R();case 3:n=e.sent,t.setState({favorites:n,loading:!1});case 5:case"end":return e.stop()}}),e)}))),t.handleRemove=function(){var e=Object(p.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState((function(t){return{loading:!0,favorites:t.favorites.filter((function(t){return t!==n}))}})),e.next=3,E(n);case 3:t.setState({loading:!1});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.handleFavoritesMusics()}},{key:"render",value:function(){var t=this,e=this.state,n=e.loading,a=e.favorites;return Object(k.jsxs)("div",{"data-testid":"page-favorites",children:[Object(k.jsx)(S,{}),n?Object(k.jsx)(y,{}):Object(k.jsxs)("main",{children:[Object(k.jsx)("h2",{children:"Favorites"}),a.map((function(e){return Object(k.jsx)(J,{trackName:e.trackName,previewUrl:e.previewUrl,trackId:e.trackId,handleFavorite:function(){return t.handleRemove(e)},handleChecked:a.some((function(t){return t===e}))},e.trackName)}))]})]})}}]),n}(a.Component),_=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(k.jsx)(S,{}),Object(k.jsx)("h2",{children:"Profile Edit"})]})}}]),n}(a.Component),z=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{"data-testid":"page-not-found",children:[Object(k.jsx)("h2",{children:"Page n\xe3o encontrada(404)"}),Object(k.jsx)(j.b,{to:"/trybe-tunes/search",children:Object(k.jsx)("button",{type:"button",children:"Pesquisa"})})]})}}]),n}(a.Component),G=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={nameUser:"",buttonFree:!0},t.handleNameUser=function(e){var n=e.target.value;t.setState((function(){return{nameUser:n}}),(function(){var e=t.state.nameUser;t.setState({buttonFree:e.length<3})}))},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.nameUser,n=t.buttonFree;return Object(k.jsxs)(j.a,{children:[Object(k.jsx)("h1",{children:"TrybeTunes"}),Object(k.jsxs)(b.d,{children:[Object(k.jsx)(b.b,{exact:!0,path:"/trybe-tunes/",children:Object(k.jsx)(w,{buttonFree:n,nameUser:e,handleNameUser:this.handleNameUser})}),Object(k.jsx)(b.b,{exact:!0,path:"/trybe-tunes/profile",children:Object(k.jsx)(N,{})}),Object(k.jsx)(b.b,{path:"/trybe-tunes/search",children:Object(k.jsx)(F,{})}),Object(k.jsx)(b.b,{path:"/trybe-tunes/album/:id",render:function(t){return Object(k.jsx)(L,Object(i.a)({},t))}}),Object(k.jsx)(b.b,{path:"/trybe-tunes/favorites",children:Object(k.jsx)(W,{})}),Object(k.jsx)(b.b,{path:"/trybe-tunes/profile/edit",children:Object(k.jsx)(_,{})}),Object(k.jsx)(b.b,{path:"*",children:Object(k.jsx)(z,{})})]}),Object(k.jsx)("footer",{children:"Marcelle Monteiro by Trybe"})]})}}]),n}(r.a.Component),H=G;s.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(H,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.99e8002b.chunk.js.map