{"version":3,"sources":["services/userAPI.js","Loading.js","pages/Login.js","Components/Header.js","pages/Profile.js","services/searchAlbumsAPI.js","Components/AlbunsUnitarios.js","pages/Search.js","services/musicsAPI.js","Components/MusicCard.js","services/favoriteSongsAPI.js","pages/Album.js","pages/Favorites.js","pages/ProfileEdit.js","pages/NotFound.js","App.js","index.js"],"names":["USER_KEY","saveUser","user","localStorage","setItem","JSON","stringify","simulateRequest","response","callback","setTimeout","getUser","Promise","resolve","parse","getItem","createUser","name","email","image","description","Loading","Component","Login","state","redirect","loading","handleButton","a","nameUser","props","setState","this","buttonFree","handleNameUser","to","className","type","value","onChange","disabled","onClick","Header","getUserLogOn","Profile","searchAlbumsAPI","artist","artistNameURL","encodeURI","replaceAll","getAlbumsAPI","fetch","APIResponse","json","results","map","artistId","artistName","collectionId","collectionName","collectionPrice","artworkUrl100","releaseDate","trackCount","AlbunsUnitarios","classNam","src","alt","React","Search","artistSearch","isButtonOff","albuns","handleSearch","event","target","length","handleCatch","preventDefault","data","htmlFor","album","getMusics","id","request","requestJson","MusicCard","trackName","previewUrl","trackId","handleChecked","handleFavorite","controls","kind","checked","FAVORITE_SONGS_KEY","readFavoriteSongs","saveFavoriteSongs","favoriteSongs","getFavoriteSongs","addSong","song","removeSong","filter","s","Album","musics","favorites","artista","handleAlbum","music","find","favorite","parseInt","prevState","favs","handleCallBackFavorites","favoritesRecuperadas","match","params","slice","some","Favorites","handleFavoritesMusics","handleRemove","fav","ProfileEdit","NotFound","App","exact","path","render","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.79f48f7b.chunk.js","sourcesContent":["const USER_KEY = 'user';\nconst TIMEOUT = 1500;\nconst SUCCESS_STATUS = 'OK';\n\nconst readUser = () => JSON.parse(localStorage.getItem(USER_KEY));\nconst saveUser = (user) => localStorage.setItem(USER_KEY, JSON.stringify(user));\n\n// --------------------------------------------------------------------\n// A função simulateRequest simula uma requisição para uma API externa\n// Esse tipo de função que \"chama outra função\" é chamada de\n// \"currying function\" https://javascript.info/currying-partials\n// não se preocupe, estudaremos isso mais futuramente\n// --------------------------------------------------------------------\n\nconst simulateRequest = (response) => (callback) => {\n  setTimeout(() => {\n    callback(response);\n  }, TIMEOUT);\n};\n\nexport const getUser = () => new Promise((resolve) => {\n  let user = readUser();\n  if (user === null) {\n    user = {};\n  }\n  simulateRequest(user)(resolve);\n});\n\nexport const createUser = (user) => new Promise((resolve) => {\n  const emptyUser = {\n    name: '',\n    email: '',\n    image: '',\n    description: '',\n  };\n  saveUser({ ...emptyUser, ...user });\n  simulateRequest(SUCCESS_STATUS)(resolve);\n});\n\nexport const updateUser = (updatedUser) => new Promise((resolve) => {\n  saveUser({ ...updatedUser });\n  simulateRequest(SUCCESS_STATUS)(resolve);\n});\n","import React, { Component } from 'react';\n\nexport default class Loading extends Component {\n  render() {\n    return (\n      <h2>Carregando...</h2>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { string, func, bool } from 'prop-types';\nimport { Redirect } from 'react-router-dom';\nimport { createUser } from '../services/userAPI';\nimport Loading from '../Loading';\n\nexport default class Login extends Component {\n  state = {\n    redirect: false,\n    loading: false,\n  }\n\n  componentWillUnmount() {\n    // Aqui coloquei o unmount para resatar o valor do redirect\n    this.setState({ redirect: false });\n  }\n\n  handleButton = async () => {\n    // Quando clico no butto ele vem pra cá e chama o loadind\n    // Depois muda o state quando a promise retorna.\n    const { nameUser } = this.props;\n    this.setState({ loading: true });\n    const userOK = await createUser({ name: nameUser });\n    if (userOK === 'OK') {\n      this.setState({\n        loading: false,\n        redirect: true,\n      });\n    }\n  }\n\n  render() {\n    const {\n      props: { nameUser, buttonFree, handleNameUser },\n      state: { loading, redirect },\n    } = this;\n\n    // Aqui tenho 3 possibilidades de renderização de acordo com o state.\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (redirect) {\n      return <Redirect to=\"/search\" />;\n    }\n\n    return (\n      <div className=\"login\" data-testid=\"page-login\">\n        <h2>Login</h2>\n        User:\n        <input\n          data-testid=\"login-name-input\"\n          type=\"text\"\n          value={ nameUser }\n          onChange={ handleNameUser }\n        />\n        <button\n          data-testid=\"login-submit-button\"\n          type=\"button\"\n          disabled={ buttonFree }\n          onClick={ this.handleButton }\n        >\n          Entrar\n        </button>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  nameUser: string.isRequired,\n  buttonFree: bool.isRequired,\n  handleNameUser: func.isRequired,\n};\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Loading from '../Loading';\nimport { getUser } from '../services/userAPI';\n\nexport default class Header extends Component {\n  state = {\n    user: '',\n    loading: false,\n  }\n  // Criei um novo state porque precisava pegar o user na API,e não por props.\n\n  componentDidMount() {\n    // Usei o did mount porque ele espera o componente montar e aí chama essa\n    // promise que é async, então provavelmente didMount deve ser async porque\n    // a partir dela consigo acessar o valor, mas fora recebo promise.\n    this.getUserLogOn();\n  }\n\n  getUserLogOn = async () => {\n    // A func que chama loading e a API.\n    this.setState({ loading: true });\n    const { name } = await getUser();\n    this.setState({ loading: false, user: name });\n  };\n\n  render() {\n    const { user, loading } = this.state;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    return (\n      <header className=\"header\" data-testid=\"header-component\">\n        <Link className=\"link\" to=\"/search\" data-testid=\"link-to-search\">Search</Link>\n        <Link\n          className=\"link\"\n          to=\"/favorites\"\n          data-testid=\"link-to-favorites\"\n        >\n          Favoritos\n        </Link>\n        <Link className=\"link\" to=\"/profile\" data-testid=\"link-to-profile\">Perfil</Link>\n        <p data-testid=\"header-user-name\">\n          {`Usuário: ${user}` }\n        </p>\n      </header>\n\n    );\n  }\n}\n\n// Como chamaa uma assync no corpo do componente:\n// https://stackoverflow.com/questions/47658765/objects-are-not-valid-as-a-react-child-found-object-promise\n","import React, { Component } from 'react';\nimport Header from '../Components/Header';\n\nexport default class Profile extends Component {\n  render() {\n    return (\n      <div data-testid=\"page-profile\">\n        <Header />\n        <h2>Profile</h2>\n      </div>\n    );\n  }\n}\n","const searchAlbumsAPI = async (artist) => {\n  const artistNameURL = encodeURI(artist).replaceAll('%20', '+');\n\n  const getAlbumsAPI = `https://itunes.apple.com/search?entity=album&term=${artistNameURL}&attribute=allArtistTerm`;\n\n  const APIResponse = await fetch(getAlbumsAPI);\n\n  const { results } = await APIResponse.json();\n\n  const response = results.map(\n    ({\n      artistId,\n      artistName,\n      collectionId,\n      collectionName,\n      collectionPrice,\n      artworkUrl100,\n      releaseDate,\n      trackCount,\n    }) => ({\n      artistId,\n      artistName,\n      collectionId,\n      collectionName,\n      collectionPrice,\n      artworkUrl100,\n      releaseDate,\n      trackCount,\n    }),\n  );\n  return response;\n};\n\nexport default searchAlbumsAPI;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { string } from 'prop-types';\nimport '../index.css';\n\nexport default class AlbunsUnitarios extends React.Component {\n  render() {\n    const { artistName, collectionId,\n      collectionName, artworkUrl100,\n    } = this.props;\n    return (\n      <div classNam=\"album-unitario\" key={ collectionId }>\n        <h3>{ artistName }</h3>\n        <img src={ artworkUrl100 } alt={ collectionName } />\n        <Link\n          to={ `/album/${collectionId}` }\n          data-testid={ `link-to-album-${collectionId}` }\n        >\n          { collectionName }\n        </Link>\n      </div>\n    );\n  }\n}\n\nAlbunsUnitarios.propTypes = {\n  artistName: string.isRequired,\n  collectionId: string.isRequired,\n  collectionName: string.isRequired,\n  artworkUrl100: string.isRequired,\n};\n","import React, { Component } from 'react';\nimport Header from '../Components/Header';\nimport searchAlbumsAPI from '../services/searchAlbumsAPI';\nimport Loading from '../Loading';\nimport AlbunsUnitarios from '../Components/AlbunsUnitarios';\n\nexport default class Search extends Component {\n  state = {\n    artist: '',\n    artistSearch: '',\n    isButtonOff: true,\n    loading: false,\n    albuns: [],\n  };\n\n  handleSearch = (event) => {\n    const { target: { value } } = event;\n    this.setState(() => ({ artist: value,\n      artistSearch: value }),\n    () => {\n      this.setState({ isButtonOff: value.length < 2 });\n    });\n  }\n\n  handleCatch = async (event) => {\n    event.preventDefault();\n    this.setState({ loading: true });\n    const { artist } = this.state;\n    const data = await searchAlbumsAPI(artist);\n    this.setState(() => ({\n      artist: '',\n      albuns: data,\n      loading: false,\n    }));\n  }\n\n  render() {\n    const { artist, isButtonOff,\n      loading, albuns, artistSearch } = this.state;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    return (\n      <div data-testid=\"page-search\">\n        <Header />\n        <form htmlFor=\"pesquisa\">\n          Nome da banda ou artista\n          <br />\n          <input\n            type=\"text\"\n            value={ artist }\n            onChange={ this.handleSearch }\n            data-testid=\"search-artist-input\"\n          />\n          <button\n            type=\"button\"\n            disabled={ isButtonOff }\n            data-testid=\"search-artist-button\"\n            onClick={ this.handleCatch }\n          >\n            Pesquisar\n          </button>\n          {\n            (albuns.length)\n              ? (\n                <section\n                  className=\"albuns-search\"\n                >\n                  <p className=\"texto-busca\">\n                    { `Resultado de álbuns de: ${artistSearch}` }\n                  </p>\n                  {albuns.map((album) => (\n                    <AlbunsUnitarios\n                      key={ album.collectionId }\n                      { ...album }\n                    />\n                  ))}\n                </section>\n              )\n              : <h3>Nenhum álbum foi encontrado</h3>\n          }\n        </form>\n      </div>\n    );\n  }\n}\n","const getMusics = async (id) => {\n  const request = await fetch(`https://itunes.apple.com/lookup?id=${id}&entity=song`);\n  const requestJson = await request.json();\n  return requestJson.results;\n};\n\nexport default getMusics;\n","import React from 'react';\nimport propTypes from 'prop-types';\n\nexport default class MusicCard extends React.Component {\n  /* handleFavorite = () => {\n      const { getMusic } = this.props;\n      this.setState((prevState) => ({\n        loading: true,\n        favorites: [...prevState.favorites, getMusic] }),\n      async () => {\n        await addSong(getMusic);\n        this.setState({ loading: false });\n      });\n    }; */\n\n  // Como a page é renderizada toda vez que faço uma atualização, se o checkbox\n  // ficasse aqui ele nunca ficaria check porque ao desmontar a page ela zera.\n  /* handleChecked = () => {\n      const { getMusic } = this.props;\n      const { favorites } = this.state;\n      favorites.some((song) => song.trackId === getMusic.trackId);\n    } */\n\n  render() {\n    const { trackName, previewUrl, trackId,\n      handleChecked, handleFavorite } = this.props;\n\n    return (\n      <ol>\n        <li>\n          <p>{ trackName }</p>\n          <audio\n            data-testid=\"audio-component\"\n            src={ previewUrl }\n            controls\n          >\n            <track kind=\"captions\" />\n            O seu navegador não suporta o elemento\n            <code>audio</code>\n            .\n          </audio>\n          <label htmlFor={ trackId }>\n            Favorita\n            <input\n              type=\"checkbox\"\n              name=\"favorite\"\n              id={ trackId }\n              data-testid={ `checkbox-music-${trackId}` }\n              onChange={ handleFavorite }\n              checked={ handleChecked }\n            />\n          </label>\n        </li>\n      </ol>\n    );\n  }\n}\n\nMusicCard.propTypes = {\n  trackName: propTypes.string.isRequired,\n  previewUrl: propTypes.string.isRequired,\n  trackId: propTypes.number.isRequired,\n  handleChecked: propTypes.bool.isRequired,\n  handleFavorite: propTypes.func.isRequired,\n};\n","const FAVORITE_SONGS_KEY = 'favorite_songs';\nconst TIMEOUT = 500;\nconst SUCCESS_STATUS = 'OK';\n\nif (!JSON.parse(localStorage.getItem(FAVORITE_SONGS_KEY))) {\n  localStorage.setItem(FAVORITE_SONGS_KEY, JSON.stringify([]));\n}\nconst readFavoriteSongs = () => JSON.parse(localStorage.getItem(FAVORITE_SONGS_KEY));\n\nconst saveFavoriteSongs = (favoriteSongs) => localStorage\n  .setItem(FAVORITE_SONGS_KEY, JSON.stringify(favoriteSongs));\n\n// --------------------------------------------------------------------\n// A função simulateRequest simula uma requisição para uma API externa\n// Esse tipo de função que \"chama outra função\" é chamada de\n// \"currying function\" https://javascript.info/currying-partials\n// não se preocupe, estudaremos isso futuramente.\n// --------------------------------------------------------------------\n\nconst simulateRequest = (response) => (callback) => {\n  setTimeout(() => {\n    callback(response);\n  }, TIMEOUT);\n};\n\nexport const getFavoriteSongs = () => new Promise((resolve) => {\n  const favoriteSongs = readFavoriteSongs();\n  simulateRequest(favoriteSongs)(resolve);\n});\n\nexport const addSong = (song) => new Promise((resolve) => {\n  if (song) {\n    const favoriteSongs = readFavoriteSongs();\n    saveFavoriteSongs([...favoriteSongs, song]);\n  }\n  simulateRequest(SUCCESS_STATUS)(resolve);\n});\n\nexport const removeSong = (song) => new Promise((resolve) => {\n  const favoriteSongs = readFavoriteSongs();\n  saveFavoriteSongs(favoriteSongs.filter((s) => s.trackId !== song.trackId));\n  simulateRequest(SUCCESS_STATUS)(resolve);\n});\n","import React, { Component } from 'react';\nimport { shape, number } from 'prop-types';\nimport Header from '../Components/Header';\nimport getMusics from '../services/musicsAPI';\nimport Loading from '../Loading';\nimport MusicCard from '../Components/MusicCard';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\n\nexport default class Album extends Component {\n  state = {\n    musics: [],\n    loading: true,\n    favorites: [],\n    artista: '',\n    album: '',\n  };\n\n  componentDidMount() {\n    const { match: { params: { id } } } = this.props;\n    if (id) {\n      this.handleAlbum(id);\n      // Aqui no didMount eu chamo funções assíncronas.\n      this.handleCallBackFavorites();\n    }\n  }\n\n  handleAlbum = async (id) => {\n    const data = await getMusics(id);\n\n    this.setState({ musics: data,\n      loading: false,\n      artista: data[0].artistName,\n      album: data[0].collectionName,\n    });\n  };\n\n  handleFavorite = ({ target }) => {\n    const { musics } = this.state;\n    const { checked, id } = target;\n    // console.log(checked);\n    const music = musics.find((favorite) => favorite.trackId === parseInt(id, 10));\n    this.setState((prevState) => ({\n      loading: true,\n      // Aqui precisei mudar o favorites porque não estava retirando\n      // do array as desmarcadas no box.\n      favorites: checked\n        ? [...prevState.favorites, music]\n        : prevState.favorites.filter((favs) => favs.trackId !== parseInt(id, 10)),\n    }),\n    async () => {\n      if (checked) await addSong(music);\n      // Aqui preciso ter um if/else para fazer uma coisa ou outra.\n      else await removeSong(music);\n      this.setState(() => ({\n        loading: false,\n      }));\n    });\n  };\n\n  /* handleChecked = () => {\n    const { favorites, musics } = this.state;\n\n    favorites.some((song) => {\n      musics.find((music) => music.trackId === song.trackId);\n      return song.trackId === });\n  } */\n\n  handleCallBackFavorites = async () => {\n    // Aqui era só chamar a função async.\n    this.setState({ loading: true });\n    const favoritesRecuperadas = await getFavoriteSongs();\n    if (favoritesRecuperadas) {\n      this.setState({\n        // As favoritas já estarão marcadas porque quando\n        // construo a lista eu já faço check de tudo que é\n        // favorite. Toda vez que faço render, que é em toda atualização\n        // também já vai checando as presentes no array favorites.\n        favorites: [...favoritesRecuperadas],\n        loading: false,\n      });\n    }\n  }\n\n  render() {\n    const { musics, loading, favorites, artista, album } = this.state;\n    return (\n      <div data-testid=\"page-album\">\n        <Header />\n        {\n          // Aqui o loading precisa estar abaixo do header para passar no requisito.\n          loading\n            ? <Loading />\n            : (\n              <main>\n                <h2 data-testid=\"artist-name\">{ artista }</h2>\n                <h3 data-testid=\"album-name\">{ album }</h3>\n                {\n                // Coloquei esse slice para pular a posição 1.\n                // O slice faz um corte no array e cria um novo.\n                // Na posição 1 coloco onde quero começar, depois da vírgula onde quero\n                // parar. No caso fiz slice porque a posição 1 não é música.\n                // https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Array/slice\n                  musics.slice(1).map((music) => (\n                    <MusicCard\n                      key={ music.trackName }\n                      // getMusic={ music }\n                      trackName={ music.trackName }\n                      previewUrl={ music.previewUrl }\n                      trackId={ music.trackId }\n                      handleFavorite={ this.handleFavorite }\n                      handleChecked={ favorites\n                        .some((song) => song.trackId === music.trackId) }\n                    />))\n                }\n              </main>\n            )\n        }\n      </div>\n    );\n  }\n}\n\nAlbum.propTypes = {\n  match: shape({\n    params: shape({\n      id: number.isRequired,\n    }).isRequired,\n  }).isRequired,\n};\n","import React, { Component } from 'react';\nimport Header from '../Components/Header';\nimport MusicCard from '../Components/MusicCard';\nimport Loading from '../Loading';\nimport { getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\n\nexport default class Favorites extends Component {\n  state = {\n    loading: false,\n    favorites: [],\n  }\n\n  componentDidMount() {\n    this.handleFavoritesMusics();\n  }\n\n  handleFavoritesMusics = async () => {\n    this.setState({ loading: true });\n    const response = await getFavoriteSongs();\n    this.setState({ favorites: response, loading: false });\n  };\n\n  handleRemove = async (fav) => {\n    this.setState((prevState) => ({\n      loading: true,\n      favorites: prevState.favorites.filter((song) => song !== fav),\n    }));\n    await removeSong(fav);\n    this.setState({ loading: false });\n  };\n\n  render() {\n    const { loading, favorites } = this.state;\n    return (\n      <div data-testid=\"page-favorites\">\n        <Header />\n        {\n          loading\n            ? <Loading />\n            : (\n              <main>\n                <h2>Favorites</h2>\n                { favorites.map((fav) => (\n                  <MusicCard\n                    key={ fav.trackName }\n                    trackName={ fav.trackName }\n                    previewUrl={ fav.previewUrl }\n                    trackId={ fav.trackId }\n                    handleFavorite={ () => this.handleRemove(fav) }\n                    handleChecked={ favorites.some((favorite) => favorite === fav) }\n                  />\n                ))}\n              </main>\n            )\n        }\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Header from '../Components/Header';\n\nexport default class ProfileEdit extends Component {\n  render() {\n    return (\n      <div data-testid=\"page-profile-edit\">\n        <Header />\n        <h2>Profile Edit</h2>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\n\nexport default class NotFound extends Component {\n  render() {\n    return (\n      <div data-testid=\"page-not-found\">\n        <h2>Page não encontrada(404)</h2>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport Login from './pages/Login';\nimport Profile from './pages/Profile';\nimport Search from './pages/Search';\nimport Album from './pages/Album';\nimport Favorites from './pages/Favorites';\nimport ProfileEdit from './pages/ProfileEdit';\nimport NotFound from './pages/NotFound';\nimport './index.css';\n\nclass App extends React.Component {\n  state = {\n    nameUser: '',\n    buttonFree: true,\n    /* redirect: false,\n    loading: false, */\n  }\n\n  handleNameUser = (event) => {\n    const { value } = event.target;\n    this.setState(() => ({\n      nameUser: value,\n    }),\n    () => {\n      // Aqui nesse segunda função que uso como argumento faço a validação\n      // do button. Na primeira função eu set o value do user.\n      const { nameUser } = this.state;\n      const MIN_NAME_USER = 3;\n      this.setState({ buttonFree: nameUser.length < MIN_NAME_USER });\n    });\n  };\n\n  render() {\n    const { nameUser, buttonFree } = this.state;\n\n    return (\n      <Router>\n        <h1>TrybeTunes</h1>\n        <Switch>\n          <Route exact path=\"/\">\n            <Login\n              buttonFree={ buttonFree }\n              nameUser={ nameUser }\n              handleNameUser={ this.handleNameUser }\n              /* redirect={ redirect }\n              loading={ loading } */\n            />\n          </Route>\n          <Route exact path=\"/profile\"><Profile /></Route>\n          <Route path=\"/search\"><Search /></Route>\n          <Route path=\"/album/:id\" render={ (props) => <Album { ...props } /> } />\n          <Route path=\"/favorites\"><Favorites /></Route>\n          <Route path=\"/profile/edit\"><ProfileEdit /></Route>\n          <Route path=\"*\"><NotFound /></Route>\n        </Switch>\n        <footer>Marcelle Monteiro by Trybe</footer>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}